(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{426:function(t,s,a){t.exports=a.p+"assets/img/structual.e71589ce.png"},427:function(t,s,a){t.exports=a.p+"assets/img/IO-File.1ffa3ba1.png"},428:function(t,s,a){t.exports=a.p+"assets/img/IO-HTTP.fbd3d4f7.png"},429:function(t,s,a){t.exports=a.p+"assets/img/requestbody.5f5fad33.png"},430:function(t,s,a){t.exports=a.p+"assets/img/image-20241127220901876.1bfbdbd0.png"},431:function(t,s,a){t.exports=a.p+"assets/img/image-20241127221627476.ff80aae5.png"},432:function(t,s,a){t.exports=a.p+"assets/img/image-20241127222354936.b408d569.png"},433:function(t,s,a){t.exports=a.p+"assets/img/toolwindow.71aa077b.png"},434:function(t,s,a){t.exports=a.p+"assets/img/image-20241127222932790.763da1f0.png"},435:function(t,s,a){t.exports=a.p+"assets/img/UI-Editor.096d8e97.png"},436:function(t,s,a){t.exports=a.p+"assets/img/codeService.4c49074d.png"},437:function(t,s,a){t.exports=a.p+"assets/img/未命名文件 (8).95971456.png"},438:function(t,s,a){t.exports=a.p+"assets/img/未命名文件.95fc5b34.png"},439:function(t,s,a){t.exports=a.p+"assets/img/editor.bec586a1.png"},440:function(t,s,a){t.exports=a.p+"assets/img/image-20241128112353125.af2808b8.png"},441:function(t,s,a){t.exports=a.p+"assets/img/image-20241128112620398.15613121.png"},442:function(t,s,a){t.exports=a.p+"assets/img/image-20241128113107495.d63eb676.png"},443:function(t,s,a){t.exports=a.p+"assets/img/image-20241128113655951.1039570a.png"},444:function(t,s,a){t.exports=a.p+"assets/img/image-20241128113718533.ab909e5f.png"},445:function(t,s,a){t.exports=a.p+"assets/img/未命名文件 (2).52553f96.png"},446:function(t,s,a){t.exports=a.p+"assets/img/image-20241128114640151.9525c5fc.png"},447:function(t,s,a){t.exports=a.p+"assets/img/bus.153049b5.png"},499:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"开发环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发环境"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),s("blockquote",[s("p",[t._v("feigebuge推荐环境")]),t._v(" "),s("ul",[s("li",[t._v("JDK: JDK 11.0.25")]),t._v(" "),s("li",[t._v("Gradle: Gradle 8.0")]),t._v(" "),s("li",[t._v("IDE: IntelliJ IDEA 2023.2.3")]),t._v(" "),s("li",[t._v("项目启动的IDE: IntelliJ IDEA 2022.2.3")])])]),t._v(" "),s("h1",{attrs:{id:"helper-v1-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helper-v1-0"}},[t._v("#")]),t._v(" HELPER v1.0")]),t._v(" "),s("h2",{attrs:{id:"整体架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#整体架构"}},[t._v("#")]),t._v(" 整体架构")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(426),alt:"structual"}}),t._v(" "),s("p",[t._v("项目分为三层，分别是")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("UI层：负责和idea交互，编写显示界面")]),t._v(" "),s("ul",[s("li",[t._v("ToolWindow：工具窗口，插件项目数据显示的主题部位")]),t._v(" "),s("li",[t._v("Editor：提供特定内容的显示编辑器")]),t._v(" "),s("li",[t._v("Action：与UI进行交互")])])]),t._v(" "),s("li",[s("p",[t._v("Service层：处理业务逻辑，负责数据与UI的交互")])]),t._v(" "),s("li",[s("p",[t._v("Basic层：提供支持环境，目前包括setting和IO模块")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("setting：项目设置模块，可以在File->Settings部位进行项目设置")])]),t._v(" "),s("li",[s("p",[t._v("IO")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("file：处理文件IO")])]),t._v(" "),s("li",[s("p",[t._v("console：负责控制台IO")])]),t._v(" "),s("li",[s("p",[t._v("http：负责网络IO，处理与leetcode平台的请求")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"icon图标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#icon图标"}},[t._v("#")]),t._v(" Icon图标")]),t._v(" "),s("p",[t._v("一律采用svg作为项目图标, 且svg大小尽量为16x16, 如果偏小, 可选择24x24, 32x32. 最大尽量不要超过32x32")]),t._v(" "),s("p",[t._v("图标命名统一为xxx.svg, xxx_dark.svg")]),t._v(" "),s("p",[t._v("其中, xxx_dark.svg表示IDE如果是dark主题, 则会使用此svg作为图标")]),t._v(" "),s("p",[t._v('关于svg颜色, xxx.svg尽量一律选择fill="", 也就是在IDE主题为light时, 默认的黑色; xxx_dark.svg尽量选择fill="#dbdbdb", 也就是IDE主题为dark时, 使用浅银色')]),t._v(" "),s("h2",{attrs:{id:"setting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting"}},[t._v("#")]),t._v(" Setting")]),t._v(" "),s("p",[t._v("该模块用三各类维护")]),t._v(" "),s("ul",[s("li",[t._v("AppSettings：包含需要idea持久的配置数据，目前需要持久化的数据有三，分别是"),s("code",[t._v("langType")]),t._v(", "),s("code",[t._v("filePath")]),t._v(", "),s("code",[t._v("coreFilePath")]),t._v(" "),s("ul",[s("li",[t._v("langType：表示当前选择的语言，当选定langType后，插件会自动创建与langType匹配的代码文件")]),t._v(" "),s("li",[t._v("filePath：指定代码文件创建目录")]),t._v(" "),s("li",[t._v("coreFilePath：指定缓存文件创建目录，该值会在用户第一次设置·filePath`时确定，"),s("strong",[t._v("项目只允许创建一次")])])])]),t._v(" "),s("li",[t._v("AppSettingsComponent：提供设置的UI界面")]),t._v(" "),s("li",[t._v("AppSettingsConfigurable：配置类，注册到idea当中，提供持久化AppSettings数据的能力")])]),t._v(" "),s("h2",{attrs:{id:"io-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#io-file"}},[t._v("#")]),t._v(" IO-File")]),t._v(" "),s("p",[t._v("提供与disk，memory交互的能力")]),t._v(" "),s("p",[s("strong",[t._v("架构图")])]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(427),alt:"IO-File"}}),t._v(" "),s("p",[s("code",[t._v("StoreService")]),t._v("目前提供缓存 + 持久化能力")]),t._v(" "),s("p",[t._v("其中缓存能力分为非持久化缓存（cache），持久化缓存（durableCache）。StoreService采用K-V结构存储数据，并在内部通过StoreContent对V进行封装。每一个缓存的数据都会序列化为Json")]),t._v(" "),s("p",[t._v("StoreService提供缓存时间检测功能，但目前该功能并未在项目中真正启用")]),t._v(" "),s("p",[t._v("此外，"),s("code",[t._v("StoreService")]),t._v("通过"),s("code",[t._v("@Service")]),t._v("注册为idea Project级别服务，有idea管理类的生命周期。在插件项目关闭之前，会调用"),s("code",[t._v("StoreService")]),t._v("的"),s("strong",[t._v("persistCahce()"),s("strong",[t._v("方法，将durableCache内的数据写入磁盘，存储为")]),t._v("app.properties")]),t._v("，磁盘路径由"),s("strong",[t._v("Settings模块的coreFilePath决定，通过AppSetting对外暴露的getCoreFilePath提供存储路径")])]),t._v(" "),s("h2",{attrs:{id:"io-http"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#io-http"}},[t._v("#")]),t._v(" IO-HTTP")]),t._v(" "),s("h3",{attrs:{id:"_1-总体介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-总体介绍"}},[t._v("#")]),t._v(" 1.总体介绍")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(428),alt:"IO-HTTP-2"}}),t._v(" "),s("p",[t._v("使用apache的httpclient框架作为底层请求支持，在此基础上根据lc-runner业务进行封装")]),t._v(" "),s("p",[t._v("总体来说分为两层，第一层HttpClient，封装httpclient提供的基础能力，对外暴露发送get和post请求方法，此外支持cookie的相关操作")]),t._v(" "),s("p",[t._v("第二层是LeetcodeClient，封装HttpClient提供能力，对业务提供各种业务接口，诸如"),s("code",[t._v("登录判断")]),t._v("，"),s("code",[t._v("题目获取")]),t._v(","),s("code",[t._v("代码提交")]),t._v("等功能，该模块直接对接"),s("code",[t._v("service")]),t._v("模块")]),t._v(" "),s("p",[t._v("另外，针对http的请求和响应，项目也做了一定封装——"),s("code",[t._v("HttpRequest")]),t._v("，"),s("code",[t._v("HttpResponse")])]),t._v(" "),s("h3",{attrs:{id:"_2-细节描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-细节描述"}},[t._v("#")]),t._v(" 2.细节描述")]),t._v(" "),s("p",[t._v("leetcode接口采用graphql技术，按需分配资源，关于该技术的详细介绍，可自行搜索")]),t._v(" "),s("p",[t._v("关于该技术对于本项目的影响，体现在Request Body的构建上")]),t._v(" "),s("p",[t._v("在没运用graphql技术前，不同资源是按照url请求路径区分，但应用该技术后，对于国内leetcode来说，大部分资源请求url都是https://leetcode.cn/graphql，而区分资源是依赖请求体")]),t._v(" "),s("p",[t._v("以"),s("strong",[t._v("题目内容查询、用户状态查询")]),t._v("接口为例")]),t._v(" "),s("blockquote",[s("p",[t._v("题目内容查询")]),t._v(" "),s("p",[t._v("url = https://leetcode.cn/graphql")]),t._v(" "),s("p",[t._v("body =")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n    query problemsetQuestionList($categorySlug: String, $limit: Int, $skip: Int, $filters: QuestionListFilterInput) {\\n  problemsetQuestionList(\\n    categorySlug: $categorySlug\\n    limit: $limit\\n    skip: $skip\\n    filters: $filters\\n  ) {\\n    hasMore\\n    total\\n    questions {\\n      acRate\\n      difficulty\\n      freqBar\\n      frontendQuestionId\\n      isFavor\\n      paidOnly\\n      solutionNum\\n      status\\n      title\\n      titleCn\\n      titleSlug\\n      topicTags {\\n        name\\n        nameTranslated\\n        id\\n        slug\\n      }\\n      extra {\\n        hasVideoSolution\\n        topCompanyTags {\\n          imgUrl\\n          slug\\n          numSubscribed\\n        }\\n      }\\n    }\\n  }\\n}\\n    "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"variables"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"categorySlug"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all-code-essentials"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"skip"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"limit"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"filters"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"searchKeywords"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3254"')]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"operationName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"problemsetQuestionList"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])])]),t._v(" "),s("blockquote",[s("p",[t._v("用户状态查询")]),t._v(" "),s("p",[t._v("url = https://leetcode.cn/graphql")]),t._v(" "),s("p",[t._v("body =")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n    query globalData {\\n  userStatus {\\n    isSignedIn\\n    isPremium\\n    username\\n    realName\\n    avatar\\n    userSlug\\n    isAdmin\\n    useTranslation\\n    premiumExpiredAt\\n    isTranslator\\n    isSuperuser\\n    isPhoneVerified\\n    isVerified\\n  }\\n  jobsMyCompany {\\n    nameSlug\\n  }\\n  commonNojPermissionTypes\\n}\\n    "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"variables"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])]),t._v(" "),s("p",[t._v("通过上述两个demo可以发现，运用了graphql技术的接口，请求体的构建相对麻烦")]),t._v(" "),s("p",[t._v("基于此，封装如下三个类，帮助创建请求体")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(429),alt:"image-20211206152427409"}}),t._v(" "),s("ul",[s("li",[t._v("GraphqlReqBody，负责构建请求体")]),t._v(" "),s("li",[t._v("SearchParams，是GraphqlReqBody的内部类，负责构建variables变量")]),t._v(" "),s("li",[t._v("ParamsBuilder，是SearchParams的内部类，通过建造者模式辅助构建SearchParams")])]),t._v(" "),s("h3",{attrs:{id:"_3-使用demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用demo"}},[t._v("#")]),t._v(" 3. 使用Demo")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 辅助构建varablies")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GraphqlReqBody"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SearchParams")]),t._v(" params "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GraphqlReqBody"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SearchParams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ParamsBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCategorySlug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all-code-essentials"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLimit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("limit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSkip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("skip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构建graphql请求体")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GraphqlReqBody")]),t._v(" body "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GraphqlReqBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LeetcodeApiUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PROBLEM_SET_QUERY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbody"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBySearchParams")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构建httpRequest")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpRequest")]),t._v(" httpRequest "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RequestBuilder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toJsonStr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContentType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addBasicHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// send request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpResponse")]),t._v(" httpResponse "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" httpClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("executePost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" resp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" httpResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("h2",{attrs:{id:"io-console"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#io-console"}},[t._v("#")]),t._v(" IO-Console")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(430),alt:"IO-Console"}}),t._v(" "),s("p",[t._v("console模块负责在插件自带的控制台上输出信息")]),t._v(" "),s("h2",{attrs:{id:"ui-action"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ui-action"}},[t._v("#")]),t._v(" UI-Action")]),t._v(" "),s("p",[t._v("官方定义：The IntelliJ Platform calls the actions of plugins in response to user interactions with the IDE")]),t._v(" "),s("p",[t._v("Action，通过继承AnAction类来提供用户与IDE的交互能力，在编写完代码后，需要在plugin.xml中进行注册")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(431),alt:"image-20241127221627476"}}),t._v(" "),s("p",[t._v("在本项目中，通过继承"),s("code",[t._v("AbstractAction")]),t._v("类来规范化每一个Action的行为。在"),s("code",[t._v("AbstractAction")]),t._v("中，会检查"),s("strong",[t._v("登录状态")]),t._v("和"),s("strong",[t._v("设置状态")]),t._v("，如果有"),s("code",[t._v("@LoginPass")]),t._v("或者"),s("code",[t._v("@SettingPass")]),t._v("注解，那么在对应检测环节则会被放行，否则进行拦截检测")]),t._v(" "),s("blockquote",[s("p",[t._v("ActionGroup，本质上也是Action，只不过他是一组Action的集合，可以在xml中用<group>标签注册")])]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--注册Action--\x3e")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("leetcode.plugin.LoginAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.xhf.leetcode.plugin.actions.loginAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Sign In"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("icon")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/icons/login.png"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--注册Group--\x3e")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("leetcode.plugin.lcActionsToolbar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("reference")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("leetcode.plugin.LoginAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("separator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("h2",{attrs:{id:"ui-toolwindow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ui-toolwindow"}},[t._v("#")]),t._v(" UI-ToolWindow")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(432),alt:"image-20241127222429401"}}),t._v(" "),s("p",[t._v("工具窗口，拓展idea功能的窗口，本项目关于这部分的模块图如下")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(433),alt:"image-20241127222429401"}}),t._v(" "),s("p",[s("code",[t._v("ToolWindowFactory")]),t._v("负责为"),s("code",[t._v("ToolWindow")]),t._v("创建内容，"),s("code",[t._v("Panel")]),t._v("则是"),s("code",[t._v("ToolWindow")]),t._v("显示内容的载体")]),t._v(" "),s("p",[t._v("ToolWindow由idea自身提供，ToolWIndowFactory负责将Panel添加到ToolWindow内")]),t._v(" "),s("p",[t._v("在本项目中，Panel所在位置如下所示")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:a(434),alt:"image-20241127222932790"}}),t._v(" "),s("ul",[s("li",[t._v("LCPanel：包含两部分数据内容，分别是Toolbar工具栏，JBList列表。LCPanel通过继承DataProvider提供对外暴露JBList的能力")]),t._v(" "),s("li",[t._v("LCConsolePanel：只包含ConsoleView，LCConsolePanel同样通过继承DataProvider提供对外暴露consoleView的能力")])]),t._v(" "),s("h2",{attrs:{id:"ui-editor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ui-editor"}},[t._v("#")]),t._v(" UI-Editor")]),t._v(" "),s("img",{attrs:{src:a(435)}}),t._v(" "),s("p",[t._v("Editor，提供特定文件的编辑显示能力。比如说普通的文本编辑器，只会显示html代码。但自定义的Html编辑器，则会按照html的语法，显示内容")]),t._v(" "),s("p",[t._v("在idea中，提供自定义文本编辑器依赖于两个类")]),t._v(" "),s("ul",[s("li",[t._v("FileEditorProvider：负责提供FileEditor，同时检测特定文件是否支持用特定Editor打开")]),t._v(" "),s("li",[t._v("FileEditor：负责处理文件内容，提供显示的JComponent")])]),t._v(" "),s("p",[t._v("在本项目中，为了支持分屏显示代码和题目内容，使用"),s("code",[t._v("SpliterTextEditorProvider")]),t._v("和"),s("code",[t._v("SplitTextEditorWithPreview")]),t._v("提供相关能力")]),t._v(" "),s("ul",[s("li",[t._v("SpliterTextEditorProvider：在提供分屏Editor的同时，检测当前文件是否支持分屏Editor预览。该类通过查询StoreService中是否缓存相关文件信息，来判断当前文件是否支持SplitTextEditor")]),t._v(" "),s("li",[t._v("SplitTextEditorWithPreview：提供分屏预览能力，在本项目中，第一块分屏是"),s("code",[t._v("PsiAwareTextEditorImpl")]),t._v("，第二块分屏是"),s("code",[t._v("MarkDownEditor")])])]),t._v(" "),s("blockquote",[s("p",[t._v("MarkdownEditor，在第一个版本中，并不支持markdown内容的显示，只支持HTML代码的显示。其显示原理是，读取自定义的HTML模板代码，同时将HTML代码注入其中。然后通过JCEF技术，启动"),s("code",[t._v("CefBrowser")]),t._v("，通过模拟浏览器的方式打开处理后的HTML内容")])]),t._v(" "),s("h2",{attrs:{id:"service-loginservice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-loginservice"}},[t._v("#")]),t._v(" Service-LoginService")]),t._v(" "),s("p",[t._v("loginService，负责处理登录有关的逻辑，利用JCEF技术，模拟启动浏览器，通过加载leetcode登录界面来提供登录功能")]),t._v(" "),s("blockquote",[s("p",[t._v("需要注意的是，当前leetcode并不支持通过uesrname和password的方式用本地代码模拟登录。leetcode官网存在参数校验的机制，在发出登录请求的同时会携带该参数。该参数只有在官网登录的时候才会携带，单纯的代码模拟无法正确登录")])]),t._v(" "),s("p",[t._v("每当"),s("code",[t._v("JBCefClient")]),t._v("加载状态改变，都会执行监控逻辑，检测当前"),s("code",[t._v("CefCookieManager")]),t._v("中是否存在name为"),s("code",[t._v("LEETCODE_SESSION")]),t._v("的Cookie，如果存在，缓存到"),s("strong",[t._v("HTTP")]),t._v("模块，同时通过"),s("code",[t._v("StoreService")]),t._v("进行持久化，登录完成后关闭当前登录窗口，加载题目信息，更新"),s("code",[t._v("LCPanel")])]),t._v(" "),s("p",[t._v("为了判断当前项目是否登录，"),s("code",[t._v("LoginService")]),t._v("对外暴露"),s("code",[t._v("isLogin")]),t._v("接口，该接口原理是通过"),s("code",[t._v("LoginService")]),t._v("内部的"),s("strong",[t._v("loginFlag")]),t._v("参数和"),s("strong",[t._v("LeetcodeClient")]),t._v("提供的接口共同判断，前者判断插件是否执行成功过登录逻辑，后者判断当前cookie是否能够代表客户端成功登录")]),t._v(" "),s("h2",{attrs:{id:"service-questionservice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-questionservice"}},[t._v("#")]),t._v(" Service-QuestionService")]),t._v(" "),s("p",[t._v("questionService，负责处理question相关逻辑。")]),t._v(" "),s("p",[s("code",[t._v("loadAllQuestionData")]),t._v("，该方法会在后台查询所有leetcode问题，查询完成后更新LCPanel暴露的JBList")]),t._v(" "),s("p",[t._v("其余业务内容注释中都有解释，没啥好说的")]),t._v(" "),s("h2",{attrs:{id:"service-codeservice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service-codeservice"}},[t._v("#")]),t._v(" Service-CodeService")]),t._v(" "),s("img",{attrs:{src:a(436)}}),t._v(" "),s("p",[t._v("上图表示CodeService与其他模块的沟通信息")]),t._v(" "),s("p",[t._v("首先介绍"),s("code",[t._v("LeetcodeEditor")]),t._v("，该类用于存储围绕题目内容，创建editor所需要的相关信息")]),t._v(" "),s("img",{staticStyle:{zoom:"25%"},attrs:{src:a(437),alt:"未命名文件 (8)"}}),t._v(" "),s("ul",[s("li",[t._v("questionId：当前题目的id")]),t._v(" "),s("li",[t._v("lang：编写当前题目用当的语言类型，比如java或者python")]),t._v(" "),s("li",[t._v("exampleTestcases：当前题目运行的测试样例【后续可以通过"),s("code",[t._v("TestcaseAction")]),t._v("更改】")]),t._v(" "),s("li",[t._v("markdownContent："),s("strong",[t._v("题目内容")]),t._v("【MarkDownEditor渲染所需的内容来源】")]),t._v(" "),s("li",[t._v("titleSlug：题目的slug标签，用于唯一标识题目，"),s("strong",[t._v("该字段是http模块发送请求时的必要字段")])]),t._v(" "),s("li",[t._v("defaultTestcases：官方提供的测试用例")])]),t._v(" "),s("p",[t._v("LeetcodeEditor会在"),s("code",[t._v("openCode()")]),t._v("方法中被创建，然后存储到storeService中")]),t._v(" "),s("p",[t._v("openCode()通过点击LCPanel显示的JBList触发，该方法的大致逻辑是")]),t._v(" "),s("ol",[s("li",[t._v("填充用户选定的question，丰富其中的信息")]),t._v(" "),s("li",[t._v("创建code文件，获取文件路径")]),t._v(" "),s("li",[t._v("创建并存储leetcodeEditor，维护额外信息。存贮的key是code文件的"),s("strong",[t._v("文件路径")])]),t._v(" "),s("li",[t._v("打开文件，并用SplitTextWithPreview显示")])]),t._v(" "),s("p",[t._v("runCode()，通过当前打开的FileEditor获取显示的code文件路径，以此作为key，从cache中获取LeetcodeEditor维护的信息，然后执行运行逻辑，将代码通过"),s("code",[t._v("LeetcodeClient")]),t._v("提交到Leetcode平台。运行的结果在通过"),s("code",[t._v("ConsoleUtils")]),t._v("输出到控制台")]),t._v(" "),s("p",[t._v("TestCase()，与runcode类似，通过code 路径获取leetcodeEditor信息。创建Dialog与用户交互，将用户提供的测试数据存入LeetcodeEditor内，更新测试用例")]),t._v(" "),s("blockquote",[s("p",[t._v("Tip：在runCode()方法中，通过"),s("code",[t._v("AbstractResultBuilder")]),t._v("将运行结果转化为String，然后再将String交由ConsoleUtils输出")]),t._v(" "),s("p",[t._v("有关于"),s("code",[t._v("AbstractResultBuilder")]),t._v("类的详细内容，请参考源码")])]),t._v(" "),s("h1",{attrs:{id:"v2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v2-0"}},[t._v("#")]),t._v(" v2.0")]),t._v(" "),s("p",[t._v("新增内容")]),t._v(" "),s("ul",[s("li",[t._v("登录模块，新增cookie登录")]),t._v(" "),s("li",[t._v("editor模块，支持同时阅览"),s("code",[t._v("题目内容")]),t._v("，"),s("code",[t._v("题解")]),t._v(", "),s("code",[t._v("提交记录")]),t._v("。支持html于markdown的内容阅览")]),t._v(" "),s("li",[t._v("新增http处理器")]),t._v(" "),s("li",[t._v("新增事件总线，解耦模块")])]),t._v(" "),s("h2",{attrs:{id:"loginservice-cookieloginwindow"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loginservice-cookieloginwindow"}},[t._v("#")]),t._v(" LoginService-CookieLoginWindow")]),t._v(" "),s("img",{staticStyle:{zoom:"25%"},attrs:{src:a(438),alt:"未命名文件"}}),t._v(" "),s("p",[t._v("Cookie登录和Jcef登录存在通用逻辑，因此向上抽取抽象类")]),t._v(" "),s("p",[t._v("BasicWindow通过start()方法启动，getFrameTItle(), loadConponent()方法下放到子类实现。前者要求子类设置启动window的title，后者要求子类填充window的内容")]),t._v(" "),s("p",[t._v("此外，CookieLoginWindow用JTextArea要求用户输入名为"),s("code",[t._v("LEETCODE_SESSTION")]),t._v("的Cookie信息")]),t._v(" "),s("h2",{attrs:{id:"ui-editor-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ui-editor-2"}},[t._v("#")]),t._v(" UI-Editor")]),t._v(" "),s("img",{attrs:{src:a(439)}}),t._v(" "),s("p",[t._v("Editor模块稍显复杂，文档将会按照等级依次介绍")]),t._v(" "),s("h3",{attrs:{id:"_1-splittexteditorprovider-和splittexteditorwithpreview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-splittexteditorprovider-和splittexteditorwithpreview"}},[t._v("#")]),t._v(" 1. SplitTextEditorProvider 和SplitTextEditorWithPreview")]),t._v(" "),s("p",[t._v("SplitTextEditorProvider 提供SplitTextEditorWithPreview，SplitTextEditorWithPreview提供第一层的分屏预览能力，左侧是编码区域，右侧是内容预览区域")]),t._v(" "),s("img",{attrs:{src:a(440)}}),t._v(" "),s("h3",{attrs:{id:"_2-psiawaretexteditorimpl和focustexteditor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-psiawaretexteditorimpl和focustexteditor"}},[t._v("#")]),t._v(" 2.PsiAwareTextEditorImpl和FocusTextEditor")]),t._v(" "),s("p",[t._v("PsiAwareTextEditorImpl作为SplitTextEditorWithPreview左侧的编辑区域，提供代码编辑能力")]),t._v(" "),s("p",[t._v("FocusTextEditor作为右侧编辑区域，提供tabs显示能力，包含三个tab，每个tab的显示内容由3个FileEditor维护")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:a(441),alt:"image-20241128112729808"}}),t._v(" "),s("h3",{attrs:{id:"_3-markdowneditor、solutioneditor、submissioneditor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-markdowneditor、solutioneditor、submissioneditor"}},[t._v("#")]),t._v(" 3.MarkDownEditor、SolutionEditor、SubmissionEditor")]),t._v(" "),s("h4",{attrs:{id:"i-markdowneditor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#i-markdowneditor"}},[t._v("#")]),t._v(" i.MarkDownEditor")]),t._v(" "),s("p",[t._v("MarkDownEditor，提供HTML、Markdown内容的显示能力，其原理是通过JCEF加载处理后的HTML文件，通过模拟浏览器选软HTML内容")]),t._v(" "),s("p",[t._v("Markdown内容渲染，使用前端vditor框架渲染。因为该框架在项目首次启动"),s("strong",[t._v("渲染Markdown耗时很长")]),t._v("，因此在渲染HTML的时候会"),s("strong",[t._v("提前加载需要的js、css文件")])]),t._v(" "),s("img",{attrs:{src:a(442)}}),t._v(" "),s("h4",{attrs:{id:"ii-solutioneditor、submissioneditor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ii-solutioneditor、submissioneditor"}},[t._v("#")]),t._v(" ii.SolutionEditor、SubmissionEditor")]),t._v(" "),s("p",[t._v("SolutionEditor、SubmissionEditor分别提供题解、提交记录显示")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:a(443),alt:"image-20241128113655951"}}),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:a(444),alt:"image-20241128113718533"}}),t._v(" "),s("p",[t._v("上述两种FileEditor都需要分屏显示功能，因此向上抽取"),s("code",[t._v("AbstractSplitTextEditor")]),t._v("抽象类，提供分窗能力")]),t._v(" "),s("p",[s("strong",[t._v("AbstractSplitTextEditor")])]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:a(445),alt:"未命名文件 (2)"}}),t._v(" "),s("ul",[s("li",[s("p",[t._v("AbstractSplitTextEditor核心组件"),s("code",[t._v("jbSplitter")]),t._v("，提供分屏显示的能力")])]),t._v(" "),s("li",[s("p",[t._v("createToolbarWrapper()为component创建工具栏，提供关闭右侧分屏的能力")])]),t._v(" "),s("li",[s("p",[t._v("initFirstComp()的实现下放到子类，初始化分屏左侧内容")])]),t._v(" "),s("li",[s("p",[t._v("openSecond(String)的实现下放到子类，创建右侧分屏内容")])])]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:a(446),alt:"image-20241128114712906"}}),t._v(" "),s("h2",{attrs:{id:"io-http-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#io-http-2"}},[t._v("#")]),t._v(" IO-HTTP")]),t._v(" "),s("p",[t._v("当前http模块通过web方式，提供resource目录下的资源内容。当前模块服务于markdown内容显示")]),t._v(" "),s("p",[t._v("本项目中，采用JCEF方式模拟浏览器，使用前端框架"),s("code",[t._v("vditor")]),t._v("渲染markdown内容。markdown的内容显示依赖于框架js、css代码，因此需要提供web能力，加载文件内容")]),t._v(" "),s("p",[s("code",[t._v("LocalHttpRequestHandler")]),t._v('负责拦截idea发出的http请求，如果请求前缀是"/leetcode-project/"，则交由'),s("code",[t._v("LocalResourceController")]),t._v("负责处理，读取resource目录下的js、css文件内容")]),t._v(" "),s("h2",{attrs:{id:"bus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bus"}},[t._v("#")]),t._v(" Bus")]),t._v(" "),s("img",{attrs:{src:a(447)}}),t._v(" "),s("p",[t._v("总线模块，提供注册和发送消息的能力。订阅方注册到特定的Topic内，接受投放到Topic中的消息内容")]),t._v(" "),s("p",[s("code",[t._v("LCSubscriber")]),t._v("，订阅者，当特定Topic内存在消息，订阅者的"),s("code",[t._v("onEvent()")]),t._v("方法将会被触发")]),t._v(" "),s("p",[s("code",[t._v("LCEventBus")]),t._v("，提供消息投递和订阅者注册功能。"),s("code",[t._v("LCEventBus")]),t._v("允许将订阅者注册到内部的订阅池，并按照不同的Topic进行存储，每个Topic是"),s("code",[t._v("LCEvent")]),t._v("的子类的class。当有观察者通过"),s("code",[t._v("LCEventBus")]),t._v("投递消息，"),s("code",[t._v("LCEventBus")]),t._v("将会通知订阅相关Topic的所有订阅者")])])}),[],!1,null,null,null);s.default=n.exports}}]);